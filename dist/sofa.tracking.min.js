!function(a){"use strict";a.define("sofa.tracking.GoogleAnalyticsTracker",function(a){var b={};return b.setup=function(){var c=b._gaq=window._gaq=window._gaq||[];c.push(["_setAccount",a.accountNumber]),c.push(["_setDomainName",a.domainName]),c.push(["_setAllowLinker",!0]);var d=document.createElement("script");d.type="text/javascript",d.async=!0,d.src=("https:"===document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(d,e)},b.trackEvent=function(b){b.category=b.category||"",b.action=b.action||"",b.label=b.label||"",b.value=b.value||"";var c=[];if("pageView"===b.category)c.push("_trackPageview"),c.push(b.label);else if(c.push("_trackEvent"),c.push(b.category),c.push(b.action),c.push(b.label),b.value&&c.push(b.value),"google_conversion"===b.action&&a.conversionId){var d="http://www.googleadservices.com/pagead/conversion/"+a.conversionId+"/?value="+b.value+"&label="+a.conversionLabel+"&guid=ON&script=0",e=new Image(1,1);e.src=d}_gaq.push(c)},b.trackTransaction=function(a){_gaq.push(["_gat._anonymizeIp"]),_gaq.push(["_addTrans",a.token,location.host,a.totals.subtotal,a.totals.vat,a.totals.shipping,"","",a.billing.countryname]),a.items.forEach(function(b){_gaq.push(["_addItem",a.token,b.productId,b.name,"",b.price,b.qty])}),_gaq.push(["_trackTrans"])},b}),a.define("sofa.tracking.TrackingService",function(b,c,d){var e={},f=e.__trackers=[];return a.observable.mixin(e),e.addTracker=function(a){if(!a.setup)throw new Error("tracker must implement a setup method");if(!a.trackEvent)throw new Error("tracker must implement a trackEvent method");if(!a.trackTransaction)throw new Error("tracker must implement a trackTransaction method");a.setup(),f.push(a)},e.trackEvent=function(a){e.emit("trackEvent",e,a),f.forEach(function(b){b.trackEvent(a)})},e.trackTransaction=function(b){var g=d.get("checkoutUrl")+"summaryfin.php";c.get(g+"?token="+b+"&details=get").then(function(c){var d=a.Util.toJson(c.data);d.token=b,e.emit("trackTransaction",e,d),f.forEach(function(a){a.trackTransaction(d)})})},e})}(sofa);